#!/usr/bin/env ruby

$:.push File.join(File.dirname(__FILE__), '..'), File.join(File.dirname(__FILE__), '..','lib')

begin
  require 'bundler/setup'
  Bundler.require(:default)
rescue LoadError
  puts 'You must `gem install bundler` and `bundle install` to run rake tasks'
end

require 'jmeter/reports'

if ARGV.empty?
  puts "Usage: #{File.basename(__FILE__)} <report_file>"
  exit 1
end

begin
  if ARGV.size > 1
    JmeterReports::Views::AsciiSummaryList.new(ARGV).render
  else
    JmeterReports::Views::AsciiSummary.new(JmeterReports::Summary.create(ARGV.first)).render
  end
  
rescue Exception => e
  puts e.message
  exit 2
end
